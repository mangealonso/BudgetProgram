<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Super Budget Program</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="main.js" defer></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="app">
        <header>
            <h1>The Super Budget Program</h1>
            <button @click="loadFetchData">Load data</button>
        </header>

        <section id="incomeSection">
            <h2>Add an income:</h2>
            <form @submit.prevent="addIncomePost">

                <p>Title:</p>
                <input type="text" v-model="incomeText">

                <p>Category:</p>
                <select v-model="incomeCategory">
                    <option value="Pay">Pay</option>
                    <option value="Benefit">Benefit</option>
                    <option value="Gift">Gift</option>
                    <option value="Selling things">Selling things</option>
                </select>

                <p>Amount:</p>
                <input type="number" v-model="incomeAmount">

                <p>Date:</p>
                <input type="date" v-model="incomeDate">
                <!--Add a variable for date inside the input and set a variable for getdate in js-->

                <button type="submit">Save income</button>
            </form>

            <h3 v-if="hasIncomePosts">All income posts:</h3>
            <p v-if="hasIncomePosts">Click on any post to delete</p>
            <button v-if="hasIncomePosts" @click="clearIncomePosts">Delete all income posts</button>
            <ul>
                <li v-for="(income, index) in incomePosts" :key="income.id">
                    <label>
                        <input type="checkbox" v-model="income.isChecked">
                        {{income.incomeText}}, {{income.incomeCategory}}, {{income.incomeAmount}}, {{income.incomeDate}}
                    </label>
                    <button v-if="showIncomeDeleteButton(index)" @click="deleteIncomePost(index)">Delete</button>
                </li>
            </ul>

            <!-- <h3>Pay:</h3>
            <ul>
                <li v-for="income in incomeCategoryPay" :key="income.id">id: {{income.incomeId}} text:
                    {{income.incomeText}} amount: {{income.incomeAmount}} </li>
            </ul> -->


        </section>

        <section id="expenseSection">
            <h2>Add an expense:</h2>
            <form @submit.prevent="addExpensePost">
                <p>Title:</p>
                <input type="text" v-model="expenseText">

                <p>Category:</p>
                <select v-model="expenseCategory">
                    <option value="Bills">Bills</option>
                    <option value="Groceries">Groceries</option>
                    <option value="Clothes">Clothes</option>
                    <option value="Eating out">Eating out</option>
                    <option value="Entertainment">Entertainment</option>
                    <option value="Public transport">Public transport</option>
                </select>

                <p>Amount:</p>
                <input type="number" v-model="expenseAmount">

                <p>Date:</p>
                <input type="date" v-model="expenseDate">

                <button type="submit">Save expense</button>
            </form>

            <h3 v-if="hasExpensePosts">All expense posts:</h3>
            <p v-if="hasExpensePosts">Click on any post to delete</p>
            <button v-if="hasExpensePosts" @click="clearExpensesPosts">Delete all expenses posts</button>
            <ul>
                <li v-for="(expense, index) in expensesPosts" :key="expense.id">
                    <label>
                        <input type="checkbox" v-model="expense.isChecked">
                        {{expense.expenseText}}, {{expense.expenseCategory}}, {{expense.expenseAmount}},
                        {{expense.expenseDate}}
                    </label>
                    <button v-if="showExpenseDeleteButton(index)" @click="deleteExpensePost(index)">Delete</button>
                </li>
            </ul>



            <!-- <button type="button" @click="clearExpenses">Clear all expense posts</button> -->

        </section>

        <!-- <button type="button" @click="clearAmounts">Clear all expense amounts</button> -->

        <section id="summarySection">

            <h2>Summary:</h2>

            <h3>Total income:</h3>
            <p>{{totalIncome}}</p>

            <h3>Total expenses:</h3>
            <p>{{totalExpenses}}</p>

            <h3>Total balance:</h3>
            <p>{{totalBalance}}</p>

            <!-- <p>Total expenses:</p>
            <select v-model="selectedTotal">
                <option value="perMonth">Per month</option>
                <option value="perCategory">Per category</option>
                <option value="perDay">Per day</option>
            </select> -->

            <div id="monthlySummary">
                <button @click="toggleExpenses">Show Expenses Per Month</button>
                <div id="expensesPerMonth" :hidden="expensesHidden">

                    <label><input type="radio" id="year" value="Year" v-model="picked">Year</label>
                    <!-- <label for="one">Income</label> -->

                    <label><input type="radio" id="month" value="Month" v-model="picked">Month</label>
                    <!-- <label for="two">Expense</label> -->
                    <!-- @change="findUniqueMonths('expenseDate') -->

                    <h4>Monthly Summary:
                        {{picked}}</h4>

                    <div v-if="picked !== 'Month'">
                        <p>Expenses:</p>
                        <ol>
                            <li></li>
                        </ol>

                    </div>

                    <div v-else-if="picked !== 'Year'">
                        <label>
                            <select v-model="perMonth" @change="filterByMonth(perMonth), showAmount">
                                <option value="">Month</option>
                                <!-- <option v-for="month in months" :key="month.value" :value="month.value" v-show="perMonth != month.value" >
                        {{ month.label}}
                    </option> -->

                                <!-- <option value="2023-03">Mar 2023</option>
                                <option value="2023-02">Feb 2023</option>
                                <option value="2023-01">Jan 2023</option>
                                <option value="2022-12">Dec 2022</option> -->
                            </select>
                        </label>

                        <p v-if="perMonth && perMonth !== ''">Expenses this month: {{monthlyExpenses}}</p>

                        <!-- <ul>
                <li v-for="post in filteredPosts" :key="post.id"> {{post.expenseText}}, {{post.expenseCategory}}
                    , {{post.expenseAmount}}, {{post.expenseDate}} </li>
              </ul> -->
                    </div>
                </div>
            </div>



    </div>
    </section>
    </div>

</body>

</html>